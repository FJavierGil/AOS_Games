openapi: 3.0.2

info:
  title: '[AOS] Especificación API REST de VideoJuegos'
  description: '*Gestión de videojuegos*'
  version: 1.0.0
  license:
    name: MIT
    url: 'https://opensource.org/licenses/MIT'
  contact:
    name: Máster Universitario en Ingeniería Web
    url: 'http://miw.etsisi.upm.es/'
    email: miw.etsisi@upm.es

servers:
  - url: https://api.example.io/api/v1

tags:
  - name: Game
    description: Game

paths:
  /games/{gameId}:
    get:
      summary: Obtiene un videojuego identificado por su `gameId`
      description: |        
        La siguiente tabla define los códigos de estado que puede devolver este endpoint
        
        | Status Code      | Descripción | Motivo                             |
        | ---------------- | ------------| -----------------------------------|
        | **200**          | OK          | Si el juego existe                 |
        | **404**          | NOT FOUND   | Si el juego no existe              |
      tags: [ Game ]
      operationId: games_get
      parameters:
        - $ref: '#/components/parameters/gameId'
      responses:
        200:
          description: Videojuego
          headers:
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Game'
              examples:
                gameExample:
                  $ref: '#/components/examples/game-example'
        404:
          $ref: '#/components/responses/Response_404'

    delete:
      summary: Elimina un videojuego identificado por su `gameId`
      description: |
        La siguiente tabla define los códigos de estado que puede devolver este endpoint
        
        | Status Code      | Descripción | Motivo                                    |
        | ---------------- | ------------| ------------------------------------------|
        | **204**          | NO CONTENT  | El videojuego existía y ha sido eliminado |
        | **404**          | NOT FOUND   | Si el videojuego no existe                |
      tags: [ Game ]
      operationId: games_delete
      parameters:
        - $ref: '#/components/parameters/gameId'
      responses:
        204:
          description: Videojuego eliminado &lt;Cuerpo de la respuesta vacío&gt;
        404:
          $ref: '#/components/responses/Response_404'

    options:
      tags: [ Game ]
      summary: Proporciona la lista de los métodos HTTP soportados por esta ruta.
      description: Devuelve una cabecera `Allow` con la lista de métodos HTTP soportados (separados por comas).
      operationId: games_options
      parameters:
        - $ref: '#/components/parameters/gameId'
      responses:
        204:
          description: 'cabecera `Allow` &lt;El cuerpo de la respuesta está vacío&gt;'
          headers:
            Allow:
              $ref: '#/components/headers/Allow'

components:
  schemas:
    Game:
      description: Información de un videojuego
      required:
        - nombre
        - empresa
        - version
        - año_publicación
      type: object
      properties:
        id:
          type: integer
          format: int32
          description: Id videojuego
          readOnly: true
        nombre:
          description: Nombre del videojuego
          type: string
        genero:
          description: Género del videojuego
          type: array
          items:
            type: string
        multijugador:
          description: Indica si es un juego multijugador
          type: boolean
        requisitos:
          description: Requisitos técnicos
          type: string
        empresa:
          description: Nombre de la empresa desarrolladora
          type: string
        version:
          description: Número de versión
          type: string
        año_publicación:
          description: Año de publicación
          type: integer
        pegi:
          $ref: '#/components/schemas/Pegi'

    Pegi:
      description: >
        Clasificación PEGI (PanEuropean Game Information)
        [https://pegi.info/](https://pegi.info/)
      enum:
        - null
        - PEGI-3
        - PEGI-7
        - PEGI-12
        - PEGI-16
        - PEGI-18

    HTTP_Problem:
      type: object
      externalDocs:
        url: https://tools.ietf.org/html/rfc7807
      description: Problem Details for HTTP APIs
      properties:
        type:
          type: string
          format: uri
          description: A URI reference [RFC3986] that identifies the problem type
        title:
          type: string
          description: short human-readable summary of the problem type
        status:
          type: number
          description: HTTP status code
        detail:
          type: string
          description: human-readable explanation specific to this occurrence of the problem
        instance:
          type: string
          format: uri
          description: "A URI reference that identifies the specific
                occurrence of the problem.  It may or may not yield further
                information if dereferenced"

  headers:
    ETag:
      description: Entity Tag (identificador único proporcionado para validación de caché)
      schema:
        type: string
        pattern: "[0-9a-f]*"
        # https://github.com/marak/Faker.js#api-methods
        x-faker: random.uuid
        example:
          33a64df551425fcc
    Allow:
      description: Lista de métodos HTTP soportados
      schema:
        type: string
      example: GET,DELETE,PUT,OPTIONS

  responses:
    Response_404:
      description: '`NOT FOUND`: recurso no disponible'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/HTTP_Problem'
          examples:
            response-http-404:
              $ref: '#/components/examples/response-http-404'

  parameters:
    gameId:
      name: gameId
      in: path
      description: Identificador único del VideoJuego
      schema:
        type: integer
        format: int32
      required: true

  examples:
    game-example:
      value:
        id: 2022
        nombre: 'Need For Speed: Porsche 2000'
        genero: [ Carreras ]
        multijugador: true
        requisitos:
        empresa: Electronic Arts
        version: 2.0.1
        año_publicación: 2000
        pegi: PEGI-3

    response-http-404:
      value:
        type: https://httpstatuses.com/404
        title: NOT FOUND
        status: 404
        detail: El recurso solicitado no está disponible...
        instance: about:blank
